<div class="todo-list">
    <form ng-submit="$ctrl.addTodo()">
        <div class="input-group">
            <input type="text"
                   class="form-control"
                   ng-model="$ctrl.todoText"
                   ng-change="$ctrl.clearError()"
                   placeholder="‚úçÔ∏è What needs to be done?"
                   ng-class="{'input-error': $ctrl.errorMessage}"
                   autofocus>
            <span class="input-group-btn">
                <button class="btn btn-primary" type="submit"
                        uib-tooltip="Add a new todo"
                        tooltip-placement="top"
                        tooltip-append-to-body="true">+ Add</button>
            </span>
        </div>
    </form>
    <div class="error-message" ng-if="$ctrl.errorMessage">
        ‚ö†Ô∏è {{$ctrl.errorMessage}}
    </div>

    <!-- Progress Bar -->
    <div class="progress-section" ng-if="$ctrl.todos.length > 0">
        <div class="progress-label">
            <span>Progress</span>
            <span>{{$ctrl.completionPercent}}%</span>
        </div>
        <uib-progressbar value="$ctrl.completionPercent"
                         max="100"
                         type="{{$ctrl.completionPercent === 100 ? 'success' : 'info'}}"
                         animate="true">
        </uib-progressbar>
    </div>

    <ul class="todo-items">
        <li class="todo-item" ng-repeat="item in $ctrl.todos track by item.id">
            <input class="todo-checkbox"
                   type="checkbox"
                   ng-checked="item.done"
                   ng-click="$ctrl.toggle(item)"
                   uib-tooltip="{{item.done ? 'Mark as active' : 'Mark as done'}}"
                   tooltip-placement="left"
                   tooltip-append-to-body="true">
            <span class="todo-text"
                  ng-class="{'done': item.done}">{{item.text}}</span>
            <button class="btn-delete"
                    ng-click="$ctrl.confirmRemove(item)"
                    uib-tooltip="Delete this todo"
                    tooltip-placement="left"
                    tooltip-append-to-body="true">‚úï Delete</button>
        </li>
    </ul>

    <div class="empty-state" ng-if="$ctrl.todos.length === 0">
        <span class="emoji">üéâ</span>
        <p>All done! Nothing to do.</p>
    </div>

    <div class="status-bar" ng-if="$ctrl.todos.length > 0">
        <span>{{$ctrl.remaining()}} of {{$ctrl.todos.length}} remaining</span>
        <a href="" ng-click="$ctrl.archive()"
           ng-if="$ctrl.remaining() < $ctrl.todos.length"
           uib-tooltip="Remove all completed todos"
           tooltip-placement="top"
           tooltip-append-to-body="true">Archive done</a>
    </div>
</div>
